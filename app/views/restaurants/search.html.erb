<script>
document.addEventListener('DOMContentLoaded', () => {
  if (navigator.geolocation) {
    navigator.geolocation.getCurrentPosition(
      (position) => {
        // 受け取った位置情報から緯度経度を取得
        const latitude = position.coords.latitude;
        const longitude = position.coords.longitude;
        
        // 取得した緯度経度をコンソールに表示
        console.log(`Latitude: ${latitude}, Longitude: ${longitude}`);

        // 取得した緯度経度をJavaScript変数に代入
        document.getElementById('latitude').value = latitude;
        document.getElementById('longitude').value = longitude;
      },
      (error) => {
        console.error('Error getting geolocation:', error);
      }
    );
  } else {
    console.error('Geolocation is not supported by this browser.');
  }
});
</script>

<h1>位置情報</h1>

<%= form_with url: restaurants_search_path, method: :get, local: true do |form| %>
  <%= form.hidden_field :latitude, id: 'latitude' %>
  <%= form.hidden_field :longitude, id: 'longitude' %>
  <%= form.submit "送信" %>
<% end %>